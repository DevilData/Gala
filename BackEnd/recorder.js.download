/*! For license information please see recorder.js.LICENSE.txt */
!function(){"use strict";var e,t,r,o,n,i,a,s,c,l,u,d,f,p,g,h,y,v,w,b,m,S,O,k,R,E,I,A,_,L,K,P,M,T,C,j,x,N,D,B,U,H,Z,F,J,q,V,G,Y,W,z,X,$,Q,ee,te,re,oe,ne,ie,ae,se={2593:function(e,t,r){r.d(t,{in:function(){return n},jj:function(){return s}});var o,n,i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},a=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(n||(n={}));var s=((o={})[n.DEBUG]="debug",o[n.INFO]="info",o[n.WARN]="warn",o[n.ERROR]="error",o),c=function(){function e(){this.loggingLevel=null,this.middlewares=[]}return e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["console",n.DEBUG,e],i(t),!1)),null!==this.loggingLevel&&n.DEBUG>=this.loggingLevel&&console.debug.apply(console,a([e],i(t),!1))},e.prototype.debugNoConsole=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["internal",n.DEBUG,e],i(t),!1))},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["console",n.ERROR,e],i(t),!1)),null!==this.loggingLevel&&n.ERROR>=this.loggingLevel&&console.error.apply(console,a([e],i(t),!1))},e.prototype.errorNoConsole=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["internal",n.ERROR,e],i(t),!1))},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["console",n.INFO,e],i(t),!1)),null!==this.loggingLevel&&n.INFO>=this.loggingLevel&&console.log.apply(console,a([e],i(t),!1))},e.prototype.infoNoConsole=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["internal",n.INFO,e],i(t),!1))},e.prototype.setLoggingLevel=function(e){this.loggingLevel=e},e.prototype.setMiddleware=function(e){this.middlewares.push(e)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["console",n.WARN,e],i(t),!1)),null!==this.loggingLevel&&n.WARN>=this.loggingLevel&&console.warn.apply(console,a([e],i(t),!1))},e.prototype.warnNoConsole=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.processMiddlewares.apply(this,a(["internal",n.WARN,e],i(t),!1))},e.prototype.processMiddlewares=function(e,t,r){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];this.middlewares.forEach((function(n){return n.apply(void 0,a([e,t,r],i(o),!1))}))},e}(),l=new c;t.ZP=l},897:function(e,t,r){r.d(t,{u:function(){return o}});var o=function(e,t){var r,o=new URL(/^https?:\/\//.test(r=e)?r:"https://".concat(r));if(!t)return o;var n=o.pathname;return n.endsWith("/")&&t.startsWith("/")&&(n=n.slice(0,-1)),new URL("".concat(n).concat(t),o.origin)}},8275:function(e,t,r){r.d(t,{t$:function(){return b},E0:function(){return m},sn:function(){return k},BH:function(){return w},jq:function(){return R},x2:function(){return E},O5:function(){return v},iY:function(){return S},R2:function(){return O}});var o=r(897),n=r(2593),i=r(1593),a=r(7691),s=function(){return s=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},c=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},l=function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u={headers:{}},d={"Content-Type":"text/plain;charset=UTF-8"},f=new Map,p=function(e,t){return c(void 0,void 0,void 0,(function(){var r,c,p,g,h,y,v,w,b,m,S,O=t.abortPreviousRequest,k=t.body,R=t.headers,E=t.baseUrl,I=t.throwOnConvert,A=void 0!==I&&I,_=t.retryCount,L=void 0===_?3:_,K=t.retryInterval,P=void 0===K?1e3:K,M=t.logPayloadOnError,T=void 0!==M&&M,C=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(t,["abortPreviousRequest","body","headers","baseUrl","throwOnConvert","retryCount","retryInterval","logPayloadOnError"]);return l(this,(function(t){switch(t.label){case 0:r=o.u(E,e),(c=f.get(r.href))&&O&&(n.ZP.debug("Aborting previous request",r),c.abort("Aborted previous request.")),c=new AbortController,f.set(r.href,c),p=s(s(s(s({},u),{body:k}),C),{signal:c.signal}),void 0===R&&(p.headers=d),h=null,y=performance.now(),v=0,w=-1,m=function(e){var t,o,n;return l(this,(function(s){switch(s.label){case 0:w=e,s.label=1;case 1:return s.trys.push([1,6,7,8]),1!==e?[3,3]:(y=performance.now(),[4,fetch(r.href,p)]);case 2:return g=s.sent(),[3,5];case 3:return[4,new Promise((function(t,o){setTimeout((function(){y=performance.now(),fetch(r.href,p).then(t).catch(o)}),P*Math.pow(2,e-1))}))];case 4:g=s.sent(),s.label=5;case 5:return b=void 0,[3,8];case 6:if(t=s.sent(),b=t,t instanceof Error&&"AbortError"===t.name)throw f.delete(r.href),new a.M("Request was aborted.",-1,{fetchTotalMs:v,finalRetries:w},c.signal,T?JSON.stringify(k):"Payload not logged.",void 0,t);return e<L?[2,"continue"]:[3,8];case 7:return v=performance.now()-y,[7];case 8:if(f.delete(r.href),!g)throw new a.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:v,finalRetries:w},c.signal,T?JSON.stringify(k):"Payload not logged.",void 0,b);if(!(g.status>399))return[3,13];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,g.text()];case 10:return h=s.sent(),[3,12];case 11:if((o=s.sent())instanceof Error&&("AbortError"===o.name||"TypeError"===o.name))throw new a.M("API request to ".concat(r.href," failed with status code ").concat(g.status,"."),-1,{fetchTotalMs:v,finalRetries:w},c.signal,"Payload not logged.",g,o);return[3,12];case 12:throw new a.M("API request to ".concat(r.href," failed with status code ").concat(g.status),g.status,{fetchTotalMs:v,finalRetries:w},c.signal,T?JSON.stringify(k):"Payload not logged.",g,void 0,{responseData:h});case 13:if(204===g.status)return[2,"break"];s.label=14;case 14:return s.trys.push([14,16,,17]),[4,g.json()];case 15:return h=s.sent(),[2,"break"];case 16:if((n=s.sent())instanceof Error&&("AbortError"===n.name||"TypeError"===n.name)&&e<L)return[2,"continue"];if(A&&n instanceof Error)throw"AbortError"===n.name||"TypeError"===n.name?new a.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:v,finalRetries:w},c.signal,T?JSON.stringify(k):"Payload not logged.",void 0,b):new i.i("Could not convert data to JSON in ".concat(r.href," request"),{originalError:n,additionalData:{status:g.status,originalErrorName:n.name,originalErrorMessage:n.message,fetchTotalMs:v,finalRetries:w,url:g.url,bodyUsed:g.bodyUsed,ok:g.ok,headers:g.headers?Array.from(g.headers):void 0,type:g.type,redirected:g.redirected,visibility:document.visibilityState,online:navigator.onLine}});if(A)throw new i.i("Unknown error happened during API call. ".concat(JSON.stringify(n)));return[3,17];case 17:return[2]}}))},S=1,t.label=1;case 1:return S<=L?[5,m(S)]:[3,4];case 2:if("break"===t.sent())return[3,4];t.label=3;case 3:return S++,[3,1];case 4:return[2,h]}}))}))},g=function(e,t){var r=t.baseUrl,n=t.body;return c(void 0,void 0,void 0,(function(){var t,i,a;return l(this,(function(s){switch(s.label){case 0:t=o.u(r,e),i=navigator.sendBeacon.bind(navigator),s.label=1;case 1:return s.trys.push([1,2,,7]),[2,i(t.href,n)];case 2:if(!((a=s.sent())instanceof TypeError&&"Illegal invocation"===a.message))return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,fetch(t.href,{method:"POST",body:n,keepalive:!0})];case 4:return s.sent(),[2,!0];case 5:return s.sent(),[2,!1];case 6:throw a;case 7:return[2]}}))}))},h=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},y=function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=function(e){var t=e.config,r=e.sessionId,n=e.visitorId;return h(void 0,void 0,void 0,(function(){var e,i;return y(this,(function(a){switch(a.label){case 0:return[4,p("/rec/setup-recording/website",{method:"POST",baseUrl:t.managerHost,body:JSON.stringify({key:t.projectKey,sessionId:r,visitorId:n,userId:null!==(i=t.userId)&&void 0!==i?i:void 0}),abortPreviousRequest:!1,throwOnConvert:!0,credentials:"include",logPayloadOnError:!0})];case 1:return(e=a.sent()).ok&&e.recordingAllowed?(void 0===e.recording.consentVersion&&(e.recording.consentVersion=1),t.isRelayProxy&&(e.recording.assetsHost=o.u(t.host,"/assets").toString(),e.recording.writerHost=o.u(t.host,"/web-writer").toString()),[2,e]):[2,e]}}))}))},w=function(e){var t=e.managerHost,r=e.sessionId,o=e.projectKey;return h(void 0,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,p("/rec/sessions/".concat(r,"/active?projectKey=").concat(o),{method:"GET",baseUrl:t,abortPreviousRequest:!0,throwOnConvert:!0})];case 1:return[2,e.sent()]}}))}))},b=function(e){var t=e.assetsHost,r=e.urls;return h(void 0,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,p("/cache",{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1})];case 1:return[2,e.sent()]}}))}))},m=function(e){var t=e.assetsHost,r=e.urls;return g("/cache",{baseUrl:t,body:JSON.stringify(r)})},S=function(e){var t=e.formData,r=e.writerHost;return h(void 0,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,p("/rec/v2/write",{method:"POST",baseUrl:r,body:t,headers:{},abortPreviousRequest:!1})];case 1:return[2,e.sent()]}}))}))},O=function(e){var t=e.formData,r=e.writerHost;return g("/rec/v2/write",{baseUrl:r,body:t})},k=function(e){var t=e.managerHost,r=e.projectKey,o=e.sessionId,n=e.visitorId,i=e.consent;return h(void 0,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,p("/rec/consent",{method:"POST",baseUrl:t,body:JSON.stringify({key:r,sid:o,vid:n,source:"website",consent:i}),abortPreviousRequest:!1,throwOnConvert:!0})];case 1:return[2,e.sent()]}}))}))},R=function(e){var t=e.datadogHost,r=e.payload,o=e.projectKey;return p("/rec/log/".concat(o),{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1,throwOnConvert:!1})},E=function(e){var t=e.datadogHost,r=e.payload,o=e.projectKey;return g("/rec/log/".concat(o),{baseUrl:t,body:JSON.stringify(r)})}},7691:function(e,t,r){r.d(t,{M:function(){return i}});var o,n=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(r,o,n,i,a,s,c,l){var u=e.call(this,r)||this;return u.status=o,u.responseTimingData=n,u.requestPayload=a,u.originalError=c,u.additionalData=l,u.name="ApiError",Object.setPrototypeOf(u,t.prototype),u.responseDebugData=s?function(e){return{url:e.url,bodyUsed:e.bodyUsed,ok:e.ok,headers:e.headers?Array.from(e.headers):void 0,type:e.type,redirected:e.redirected}}(s):void 0,u.isSignalAborted=null==i?void 0:i.aborted,u.visibilityState=document.visibilityState,u.isOffline=!1===navigator.onLine,u}return n(t,e),Object.defineProperty(t.prototype,"isConnectionError",{get:function(){return this.status<0&&!this.isAbortedByRecorder&&!this.isAbortedByUserAgent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByRecorder",{get:function(){return this.isSignalAborted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByUserAgent",{get:function(){var e;return this.originalError instanceof Error&&"AbortError"===(null===(e=this.originalError)||void 0===e?void 0:e.name)&&!this.isSignalAborted},enumerable:!1,configurable:!0}),t}(Error)},1593:function(e,t,r){r.d(t,{i:function(){return i}});var o,n=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(r,o){var n=void 0===o?{}:o,i=n.shouldReport,a=void 0===i||i,s=n.additionalData,c=void 0===s?{}:s,l=n.originalError,u=e.call(this,r)||this;return Object.setPrototypeOf(u,t.prototype),u.name="RecorderError",u.additionalData=c,u.shouldReport=a,l&&(u.originalName=l.name,u.originalStack=l.stack,u.originalMessage=l.message,u.originalError=l),l instanceof t&&(u.originalAdditionalData=l.additionalData),u}return n(t,e),t.prototype.toJSON=function(){return{name:this.name,originalName:this.originalName,message:this.message,shouldReport:this.shouldReport,additionalData:this.additionalData,stack:this.stack,originalStack:this.originalStack,originalAdditionalData:this.originalAdditionalData,originalMessage:this.originalMessage,originalError:this.originalError}},t}(Error)},6020:function(e,t,r){r.d(t,{O:function(){return n}});var o=r(50),n=function(){return(0,o.x0)()}},5246:function(e,t,r){r.d(t,{K:function(){return d},d:function(){return f}});var o=r(2593),n=r(8275),i=r(7691),a=r(1593),s=r(6020),c=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},l=function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(e,t){return c(void 0,void 0,void 0,(function(){var r;return l(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),o.ZP.debug("Calling active endpoint in init."),[4,(0,n.BH)({sessionId:e,managerHost:t.managerHost,projectKey:t.projectKey})];case 1:return[2,s.sent()];case 2:return(r=s.sent())instanceof i.M?r.isConnectionError||o.ZP.error("/active call failed on network error.",r):r instanceof a.i?r.shouldReport&&o.ZP.error("/active call failed on recorder error.",r):o.ZP.error("/active call failed on unknown error.",r),[3,3];case 3:return[2,null]}}))}))},d=function(e,t){var r,o,n,i,a=[],s=t.getCookieMetadataForProjectKey(e.projectKey);a.push({sessionId:null!==(r=null==s?void 0:s.sessionId)&&void 0!==r?r:null,visitorId:null!==(o=null==s?void 0:s.visitorId)&&void 0!==o?o:null});var c=t.getLocalStorageMetadataForProjectKey(e.projectKey),l=null!==(n=null==c?void 0:c.sessionId)&&void 0!==n?n:null,u=null!==(i=null==c?void 0:c.visitorId)&&void 0!==i?i:null;return a[0].sessionId===l&&a[0].visitorId===u||a.push({sessionId:l,visitorId:u}),a},f=function(e,t){return c(void 0,void 0,void 0,(function(){var r,o,n,i,a,c,d,f,p,g;return l(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=r.next(),l.label=1;case 1:return o.done?[3,4]:(n=o.value).sessionId?[4,u(n.sessionId,t)]:[3,3];case 2:if(null==(i=l.sent())?void 0:i.isActive)return[2,{sessionId:n.sessionId,visitorId:null!==(f=n.visitorId)&&void 0!==f?f:(0,s.O)(),sessionTimeRemaining:i.sessionTimeRemaining}];l.label=3;case 3:return o=r.next(),[3,1];case 4:return[3,7];case 5:return a=l.sent(),c={error:a},[3,7];case 6:try{o&&!o.done&&(d=r.return)&&d.call(r)}finally{if(c)throw c.error}return[7];case 7:return[2,{sessionId:(0,s.O)(),visitorId:null!==(g=null===(p=e.find((function(e){return null!==e.visitorId})))||void 0===p?void 0:p.visitorId)&&void 0!==g?g:(0,s.O)()}]}}))}))}},3557:function(e,t,r){r.d(t,{H:function(){return o}});var o=function(e){try{if("object"==typeof e&&null!==e){if(e instanceof Error&&!Object.hasOwn(e,"toJSON")){var t=JSON.parse(JSON.stringify(e));return t.name||(t.name=e.name),t.stack||(t.stack=e.stack),t.message||(t.message=e.message),JSON.stringify(t)}return JSON.stringify(e)}return"function"==typeof e||"symbol"==typeof e||"bigint"==typeof e||void 0===e?JSON.stringify(typeof e):JSON.stringify(e)}catch(e){return JSON.stringify("[non-serializable object]")}}},1035:function(e,t,r){r.d(t,{X:function(){return a}});var o=r(2593),n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=["mousemove","click","keypress","touchmove","drag","wheel"],a=function(){return e=void 0,t=void 0,a=function(){var e,t,r,a,s,c,l,u,d;return function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(f){switch(f.label){case 0:return e=Array.from(document.querySelectorAll("iframe")),t=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([document],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}(e.map((function(e){return e.contentDocument}))),!1),r=[],a=i.map((function(e){return new Promise((function(o){var i,a,s=function(t){t&&(r.push((function(){return t.removeEventListener(e,o,!0)})),t.addEventListener(e,o,!0))};try{for(var c=n(t),l=c.next();!l.done;l=c.next())s(l.value)}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}))})),[4,Promise.any(a)];case 1:f.sent();try{for(s=n(r),c=s.next();!c.done;c=s.next()){l=c.value;try{l()}catch(e){o.ZP.debug("Listener could not be removed",e)}}}catch(e){u={error:e}}finally{try{c&&!c.done&&(d=s.return)&&d.call(s)}finally{if(u)throw u.error}}return[2]}}))},new((r=void 0)||(r=Promise))((function(o,n){function i(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}));var e,t,r,a}},50:function(e,t,r){r.d(t,{x0:function(){return o}});var o=function(e){return void 0===e&&(e=21),crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"")}}},ce={};function le(e){var t=ce[e];if(void 0!==t)return t.exports;var r=ce[e]={exports:{}};return se[e](r,r.exports,le),r.exports}le.m=se,le.d=function(e,t){for(var r in t)le.o(t,r)&&!le.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},le.f={},le.e=function(e){return Promise.all(Object.keys(le.f).reduce((function(t,r){return le.f[r](e,t),t}),[]))},le.u=function(e){return"bundle.cc215a56ebca2d987cf1.js"},le.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),le.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="@smartlook/recorder:",le.l=function(r,o,n,i){if(e[r])e[r].push(o);else{var a,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,le.nc&&a.setAttribute("nonce",le.nc),a.setAttribute("data-webpack",t+n),a.src=r,0!==a.src.indexOf(window.location.origin+"/")&&(a.crossOrigin="anonymous")),e[r]=[o];var d=function(t,o){a.onerror=a.onload=null,clearTimeout(f);var n=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}},le.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;le.g.importScripts&&(e=le.g.location+"");var t=le.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),le.p=e}(),function(){var e={538:0};le.f.j=function(t,r){var o=le.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(r,n){o=e[t]=[r,n]}));r.push(o[2]=n);var i=le.p+le.u(t),a=new Error;le.l(i,(function(r){if(le.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",a.name="ChunkLoadError",a.type=n,a.request=i,o[1](a)}}),"chunk-"+t,t)}};var t=function(t,r){var o,n,i=r[0],a=r[1],s=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in a)le.o(a,o)&&(le.m[o]=a[o]);s&&s(le)}for(t&&t(r);c<i.length;c++)n=i[c],le.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunk_smartlook_recorder=self.webpackChunk_smartlook_recorder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),f="smartlook_picker",p=(null===(r=document.currentScript)||void 0===r?void 0:r.src.replace("recorder.js","picker.b0875e107277251b429e.js"))||"",g=function(){function e(){}return e.shouldStart=function(){return!(!window.sessionStorage.getItem(f)&&!window.localStorage.getItem(f))||document.referrer.indexOf("picker/4f249306-efd5-4127-b768-79a6750a7c5d-ca97caf7-335a-4e1f-b047-be42cb6098f9")>-1},e.start=function(){var e=document.createElement("script");e.src=p,document.head.append(e),window.sessionStorage.setItem(f,"1")},e}(),h=le(2593),y=le(8275),v=le(7691),w=le(897),b=function(){return b=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},b.apply(this,arguments)},S={banTime:3e5,externalLogging:!0,forceSetupData:null,host:(m={eu:"manager.eu.smartlook.cloud",us:"manager.us.smartlook.cloud"}).eu,managerHost:m.eu,upload:function(){return null},cookies:!0,loggingLevel:h.in.ERROR,userId:null,uploadInterval:3e3,record:{},region:"eu",startRecordingAfterUserActivity:!0,storageKeys:{SMARTLOOK_BAN_REASON:"smartlook_ban_reason",SMARTLOOK_BAN_EXPIRE:"smartlook_ban_expire",SMARTLOOK_COOKIE_KEY:"SL_C_23361dd035530_KEY",SMARTLOOK_COOKIE_SID:"SL_C_23361dd035530_SID",SMARTLOOK_COOKIE_VID:"SL_C_23361dd035530_VID",SMARTLOOK_DEBUG:"smartlook_debug",SMARTLOOK_LS_KEY:"SL_L_23361dd035530_KEY",SMARTLOOK_LS_SID:"SL_L_23361dd035530_SID",SMARTLOOK_LS_VID:"SL_L_23361dd035530_VID"},isRelayProxy:!1},O=function(e,t,r){var o=Object.assign(S,b(b({},r),{projectKey:e,recorderVersion:t}));if(r.host){o.managerHost=o.host;var n=w.u(r.host);(!n.host.endsWith("smartlook.cloud")||n.host.endsWith("smartlook.cloud")&&n.host.includes("relay-proxy"))&&(o.managerHost=new URL("/manager",n).toString(),o.isRelayProxy=!0)}else if(r.region){var i=m[r.region];if(void 0===i)throw new Error("Unknown region");o.host=i,o.managerHost=i}return"f2353f89c956e0b7a93a0ab1b5cfbf01725acab2"===e&&(o.host=m.us,o.managerHost=m.us),o},k=le(1593),R=le(5246),E=le(1035),I=function(e,t,r){if(void 0===window.smartlook.recorderClass)throw new k.i("Cannot initialize Smartlook. Smartlook class is not present.");window.smartlook.recorder=new window.smartlook.recorderClass(e,t,r),Object.defineProperties(window.smartlook,{consent:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.consent}catch(e){h.ZP.warn("Cannot get consent: ".concat(e))}}},playUrl:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.playUrl}catch(e){h.ZP.warn("Cannot get playUrl: ".concat(e))}}},sessionId:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.sessionId}catch(e){h.ZP.warn("Cannot get sessionId: ".concat(e))}}},visitorId:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.visitorId}catch(e){h.ZP.warn("Cannot get visitorId: ".concat(e))}}},recordId:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.recordId}catch(e){h.ZP.warn("Cannot get recordId: ".concat(e))}}},key:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.projectKey}catch(e){h.ZP.warn("Cannot get key: ".concat(e))}}},version:{get:function(){return e.recorderVersion}},_debugData:{get:function(){var e;try{return null===(e=window.smartlook.recorder)||void 0===e?void 0:e.debugData}catch(e){h.ZP.warn("Cannot get _debugData: ".concat(e))}}}})},A=function(e){for(var t=e.domain,r=t.split("."),o="f0189a22486d".concat(Date.now()),n=0;n<r.length-1&&!e.cookie.includes("".concat(o,"=").concat(o));)n+=1,t=r.slice(-1-n).join("."),e.cookie="".concat(o,"=").concat(o,";domain=").concat(t,";path=/;sameSite=strict;secure");return e.cookie="".concat(o,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(t,";path=/;sameSite=strict;secure"),t},_=function(){function e(t){var r=t.useCookies,o=t.storageKeys;this.useCookies=r,this.storageKeys=o,e.removeCookie(this.storageKeys.SMARTLOOK_LS_SID),e.removeCookie(this.storageKeys.SMARTLOOK_LS_VID),e.removeCookie(this.storageKeys.SMARTLOOK_LS_KEY)}return e.prototype.clearStorage=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_DEBUG),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_SID),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_VID),this.useCookies&&(e.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY),e.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_SID),e.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_VID))},e.prototype.getBanExpire=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.getBanReason=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.getCookieMetadataForProjectKey=function(t){return this.useCookies?t!==e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY)?null:{sessionId:e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_SID),visitorId:e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_VID)}:null},e.prototype.getLocalStorageMetadataForProjectKey=function(t){return t!==e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY)?null:{sessionId:e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_SID),visitorId:e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_VID)}},e.prototype.isRecorderInDebugMode=function(){return Boolean(e.getLocalStorage(this.storageKeys.SMARTLOOK_DEBUG))},e.prototype.removeBanExpire=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.removeBanReason=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.setBanExpire=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE,t)},e.prototype.setBanReason=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON,t)},e.prototype.setMetadata=function(e,t,r){this.setCookieMetadata(e,t,r),this.setLocalStorageMetadata(e,t,r)},e.getCookie=function(e){var t=document.cookie.split(";");try{for(var r=0;r<t.length;r+=1){var o=t[r].trim().split("=");if(o[0]===e)return o[1]}}catch(e){}return null},e.getCookieExpirationDate=function(){var e=new Date;return e.setMonth(e.getMonth()+13),e.toString()},e.getLocalStorage=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},e.removeCookie=function(e){window.document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(A(document),";path=/")},e.removeFromLocalStorage=function(e){window.localStorage.removeItem(e)},e.setCookie=function(t,r){r&&(window.document.cookie="".concat(t,"=").concat(r,";expires=").concat(e.getCookieExpirationDate(),";domain=").concat(A(document),";path=/;sameSite=strict;secure"))},e.setLocalStorage=function(e,t){try{return window.localStorage.setItem(e,t),!0}catch(e){return!1}},e.prototype.setCookieMetadata=function(t,r,o){this.useCookies&&(e.setCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY,o),e.setCookie(this.storageKeys.SMARTLOOK_COOKIE_SID,t),e.setCookie(this.storageKeys.SMARTLOOK_COOKIE_VID,r))},e.prototype.setLocalStorageMetadata=function(t,r,o){e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY,o),e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_SID,t),e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_VID,r)},e}(),L=function(){function e(e,t,r,o){var n=this;if(this.persistentStorageManager=e,this.startRecording=t,this.stopRecording=r,this.banTime=o,this.isAppliedBan(!0)){var i=this.persistentStorageManager.getBanExpire();if(i){var a=Number.parseInt(i,10)-Date.now();a>0&&(h.ZP.debug("BAN is applied. Waiting ".concat(a,"ms.")),this.banTimeoutId=setTimeout((function(){n.banTimeoutId=void 0,n.startRecording()}),a))}}}return e.prototype.applyBan=function(e){var t=this;if("hidden"!==document.visibilityState){e.shouldReport&&h.ZP.error('Applying ban. Reason: "'.concat(e.message,'".'),e);var r=Date.now()+this.banTime;if(this.persistentStorageManager.setBanExpire(r.toString()),this.persistentStorageManager.setBanReason(e.message),void 0!==this.banTimeoutId)clearTimeout(this.banTimeoutId);else try{this.stopRecording()}catch(e){}this.banTimeoutId=setTimeout((function(){t.banTimeoutId=void 0;try{t.startRecording()}catch(t){h.ZP.error("Cannot start recording after BAN expired",t,{banReason:e.message})}}),this.banTime)}},e.prototype.getBanReason=function(){var e;return null!==(e=this.persistentStorageManager.getBanReason())&&void 0!==e?e:""},e.prototype.isAppliedBan=function(e){if(void 0===e&&(e=!1),!e)return void 0!==this.banTimeoutId;var t=this.persistentStorageManager.getBanExpire();return!!(t&&Number.parseInt(t,10)>Date.now())||(this.persistentStorageManager.removeBanExpire(),this.persistentStorageManager.removeBanReason(),!1)},e}(),K=le(50),P=le(3557),M=function(){return M=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},M.apply(this,arguments)},T=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},C=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},j=function(){function e(e,t,r,o){var n=this;this.uploadInterval=e,this.recorderVersion=t,this.datadogHost=r,this.projectKey=o,this.logMessagesCache=new Map,this.logsToSend=[],this.uuid=(0,K.x0)(),this.sendLog=function(e,t,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];if(t===h.in.ERROR||"internal"===e){var a=n.logMessagesCache.get(r),s=performance.now();if(n.logMessagesCache.set(r,s),void 0!==a&&s-a<1e3)return;n.logsToSend.push(n.createLog.apply(n,C([r,t],T(o),!1))),"hidden"===document.visibilityState&&n.processLogs()}},this.createLog=function(e,t){for(var r,o,i,a,s,c,l,u,d,f=[],p=2;p<arguments.length;p++)f[p-2]=arguments[p];var g=Object.fromEntries(f.map((function(e,t){return[t,JSON.parse((0,P.H)(e))]})));return{message:e,context:M({origin:null!==(r=window.location.origin)&&void 0!==r?r:"unknown",playUrl:null!==(o=window.smartlook.playUrl)&&void 0!==o?o:"unknown",visitorId:null!==(i=window.smartlook.visitorId)&&void 0!==i?i:"unknown",sessionId:null!==(a=window.smartlook.sessionId)&&void 0!==a?a:"unknown",recordId:null!==(s=window.smartlook.recordId)&&void 0!==s?s:"unknown",uuid:n.uuid,url:null!==(l=null===(c=window.location)||void 0===c?void 0:c.href)&&void 0!==l?l:"unknown",userAgent:null!==(d=null===(u=window.navigator)||void 0===u?void 0:u.userAgent)&&void 0!==d?d:"unknown"},g),severity:h.jj[t],tags:{},timestamp:Date.now()}},this.handleError=function(e){e.error instanceof k.i&&e.error.shouldReport&&(n.logsToSend.push(n.createLog("Uncaught error: ".concat(e.error),h.in.ERROR,e.error)),"hidden"===document.visibilityState&&n.processLogs())},this.handlePromiseRejection=function(e){e.reason instanceof k.i&&e.reason.shouldReport&&(n.logsToSend.push(n.createLog("Unhandled promise rejection: ".concat(e.reason),h.in.ERROR,e.reason)),"hidden"===document.visibilityState&&n.processLogs())},this.processLogIntervalId=setInterval((function(){n.processLogs()}),this.uploadInterval),window.addEventListener("error",this.handleError,!0),window.addEventListener("unhandledrejection",this.handlePromiseRejection,!0),document.addEventListener("visibilitychange",(function(e){e.isTrusted&&"hidden"===document.visibilityState&&(n.processLogs(),setTimeout((function(){n.processLogs()}),500))}),!0)}return e.prototype.processLogs=function(){if(this.logsToSend.length>0){var e={tags:{platform:"web",sdkVersion:this.recorderVersion,userAgent:navigator.userAgent},logs:this.logsToSend};try{"visible"===document.visibilityState?(0,y.jq)({datadogHost:this.datadogHost,payload:e,projectKey:this.projectKey}):(0,y.x2)({datadogHost:this.datadogHost,payload:e,projectKey:this.projectKey})}catch(e){}this.logsToSend=[]}},e}(),x=function(e){var t,r=new _({useCookies:e.cookies,storageKeys:e.storageKeys}),o=new L(r,(function(){return window.smartlook("reinit",e.projectKey,e)}),(function(){return window.smartlook("stop")}),e.banTime);return e.externalLogging&&(t=new j(e.uploadInterval,e.recorderVersion,e.managerHost,e.projectKey)),h.ZP.setLoggingLevel(r.isRecorderInDebugMode()?h.in.DEBUG:e.loggingLevel),t&&h.ZP.setMiddleware(t.sendLog),{persistentStorageManager:r,banService:o}},N=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},D=function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},B=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},U=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},H=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return N(void 0,void 0,void 0,(function(){var o,n,i,a,s,c,l,u,d,f,p,g,y,v,w,b,m,S,O,R;return D(this,(function(E){switch(E.label){case 0:if(E.trys.push([0,25,,26]),"finish"===e)return o=r,window.smartlook.recorder?(f=window.smartlook.recorder).finishAllQueuedTasks.apply(f,U([],B(r),!1)):o[0](),[2];if("stop"===e)return window.smartlook.recorder&&(p=window.smartlook.recorder).stopRecording.apply(p,U([],B(r),!1)),[2];if(t.isAppliedBan())return h.ZP.warn("Cannot call smartlook API. Session is banned. Reason: ".concat(t.getBanReason(),".")),[2];if(!window.smartlook.recorder)return h.ZP.warn("Smartlook is not initialized. Cannot call public api."),[2];switch(e){case"record":return[3,1];case"resume":return[3,2];case"pause":return[3,4];case"error":return[3,6];case"track":return[3,7];case"navigation":return[3,8];case"disable":return[3,9];case"properties":return[3,13];case"identify":return[3,14];case"anonymize":return[3,15];case"consentIP":return[3,17];case"consentAPI":return[3,19];case"consentForms":return[3,21]}return[3,23];case 1:return(g=window.smartlook.recorder).setRecording.apply(g,U([],B(r),!1)),[3,24];case 2:return[4,(y=window.smartlook.recorder).resumeRecording.apply(y,U([],B(r),!1))];case 3:return E.sent(),[3,24];case 4:return[4,(v=window.smartlook.recorder).pauseRecording.apply(v,U([],B(r),!1))];case 5:return E.sent(),[3,24];case 6:return(w=window.smartlook.recorder).logCustomError.apply(w,U([],B(r),!1)),[3,24];case 7:return(b=window.smartlook.recorder).logCustomEvent.apply(b,U([],B(r),!1)),[3,24];case 8:return(m=window.smartlook.recorder).changeUrl.apply(m,U([],B(r),!1)),[3,24];case 9:return!0!==r[0]?[3,10]:(window.smartlook.recorder.pauseRecording(),[3,12]);case 10:return!1!==r[0]?[3,12]:[4,window.smartlook.recorder.resumeRecording()];case 11:E.sent(),E.label=12;case 12:return[3,24];case 13:return(S=window.smartlook.recorder).setCustomEventProperties.apply(S,U([],B(r),!1)),[3,24];case 14:return(O=window.smartlook.recorder).identifyVisitor.apply(O,U([],B(r),!1)),[3,24];case 15:return[4,(R=window.smartlook.recorder).anonymize.apply(R,U([],B(r),!1))];case 16:return E.sent(),[3,24];case 17:return n=B(r,2),i=n[0],u=n[1],[4,window.smartlook.recorder.setConsent({ip:i},u)];case 18:return E.sent(),[3,24];case 19:return a=B(r,2),s=a[0],u=a[1],[4,window.smartlook.recorder.setConsent({api:s},u)];case 20:return E.sent(),[3,24];case 21:return c=B(r,2),l=c[0],u=c[1],[4,window.smartlook.recorder.setConsent({forms:l},u)];case 22:return E.sent(),[3,24];case 23:return"function"==typeof e&&e(),[3,24];case 24:return[3,26];case 25:return(d=E.sent())instanceof k.i&&!d.shouldReport?h.ZP.warn(d.message):d instanceof Error?console.warn(d.message,d):console.error(JSON.stringify(d)),[3,26];case 26:return[2]}}))}))},Z=function(){return Z=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Z.apply(this,arguments)},F=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},J=function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},q=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},V=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},G=function(){return!!window.navigator.userAgent.includes("BingPreview")||!!window.navigator.userAgent.includes("adidxbot")||!!window.navigator.userAgent.includes("Bingbot")},Y=!1,W=!1,z=!0,X=[],$=[],Q=!1,ee=!1,te=0,re=!1,oe=!1,ne=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return F(void 0,void 0,void 0,(function(){var r,c,l,u,d,f,p,g,w,b,m,S,A,_,L,K,P,M,T,C,j,N;return J(this,(function(D){switch(D.label){case 0:return G()?(console.warn("Smartlook is disabled. Bot detected."),[2]):"visitor_blocked"!==n||!s||"identify"!==e||oe?[3,2]:(oe=!0,r=q(t,1),"string"!=typeof(c=r[0])&&"number"!=typeof c||"string"==typeof c&&!c?(console.warn("Invalid user id passed to smartlook('identify', ...). Received: ".concat(c)),oe=!1,[2]):(l=new Promise((function(r){$.unshift([e,r,t]),$.unshift.apply($,V([],q(X),!1))})).finally((function(){oe=!1})),[4,ne("reinit",s.projectKey,Z(Z({},s),{userId:String(c)}))]));case 1:return D.sent(),[2,l];case 2:return["init","finish","reinit"].includes(e)||Y&&!re?"init"!==e&&"reinit"!==e?[3,20]:("reinit"===e&&(re=!0),"init"===e&&(te+=1),te>1?(h.ZP.debug("Init called ".concat(te,"x times. Skipping initialization.")),"reinit"===e&&(re=!1),[2]):(u=q(t,3),d=u[0],f=u[1],p=u[2],void 0===d||"string"==typeof d&&0===d.length?(console.warn("Smartlook could not be initialized. Provided project key is empty."),"reinit"===e&&(re=!1),[2]):(s=O(d,"v1.0.1-6-g54fb70a",null!=f?f:{})).startRecordingAfterUserActivity?[4,(0,E.X)()]:[3,4])):[2,new Promise((function(r){$.push([e,r,t])}))];case 3:D.sent(),D.label=4;case 4:return Q||(g=x(s),a=g.persistentStorageManager,i=g.banService,Q=!0),h.ZP.debug("Init called."),i.isAppliedBan()?(h.ZP.debug("BAN is applied. Initialization is postponed."),p&&p(),"reinit"===e&&(re=!1),[2]):(w=(0,R.K)(s,a),[4,(0,R.d)(w,s)]);case 5:b=D.sent(),m=b.sessionId,S=b.visitorId,A=b.sessionTimeRemaining,_=void 0,D.label=6;case 6:return D.trys.push([6,17,18,19]),a.setMetadata(m,S,s.projectKey),[4,(0,y.O5)({config:s,sessionId:m,visitorId:S})];case 7:if(!(_=D.sent()).recordingAllowed)return[3,15];if(z=!0,n=void 0,o=void 0,W)return[3,12];D.label=8;case 8:return D.trys.push([8,10,,11]),[4,le.e(296).then(le.bind(le,4093))];case 9:return D.sent(),[3,11];case 10:return D.sent(),ee=!0,[3,11];case 11:ee||(I(s,a,i),W=!0),D.label=12;case 12:return ee?[3,14]:[4,null===(T=window.smartlook.recorder)||void 0===T?void 0:T.startRecording(m,S,_,A)];case 13:D.sent(),D.label=14;case 14:return[3,16];case 15:z=!1,o=null===(C=_.error)||void 0===C?void 0:C.message,n=null===(j=_.error)||void 0===j?void 0:j.code,(null===(N=_.error)||void 0===N?void 0:N.message)?console.warn("Smartlook not recording. Reason: ".concat(_.error.message,".")):console.warn("Smartlook not recording."),D.label=16;case 16:return[3,19];case 17:return L=D.sent(),K=L instanceof Error?L.message:"Unknown reason /setup",L instanceof v.M?(P=L.isAbortedByUserAgent&&"hidden"===L.visibilityState,404===L.status?(console.warn("Smartlook not recording. Reason: Project not found."),z=!1,o="Project not found",n="project_not_found",h.ZP.warnNoConsole("Setup failed. Reason: ".concat(K,"."),L,fetch.toString())):P||i.applyBan(new k.i("Setup failed. Reason: ".concat(K,"."),{originalError:L,shouldReport:!L.isConnectionError}))):L instanceof Error&&(L.message.includes("Cannot set properties of undefined")||L.message.includes("undefined is not an object (evaluating 'this.sessionManager=e')")||L.message.includes("this is undefined"))?ee=!0:i.applyBan(new k.i('Setup failed. Reason: "'.concat(K,'".'),{originalError:L instanceof Error?L:void 0})),[3,19];case 18:return Y=!0,[7];case 19:return"reinit"===e&&(re=!1),M=V([],q($),!1),$=[],queueMicrotask((function(){M.forEach((function(e){var t=q(e,3),r=t[0],o=t[1],n=t[2];ne.apply(void 0,V([r],q(n),!1)).finally(o)}))})),p&&p(),[2];case 20:return z?ee?(h.ZP.debug("Cannot call ".concat(e,". Bundle failed to load.")),[2]):[3,21]:(h.ZP.warn("Cannot call ".concat(e,". Recording is disabled. Reason ").concat(null!=o?o:"unknown",".")),"visitor_blocked"===n&&X.push([e,function(){return null},t]),[2]);case 21:return[4,H.apply(void 0,V([e,i],q(t),!1))];case 22:D.sent(),D.label=23;case 23:return[2]}}))}))},ie=function(){var e,t,r=null!==(t=null===(e=window.smartlook)||void 0===e?void 0:e.api)&&void 0!==t?t:[];window.smartlook=ne,r.forEach((function(e){var t=q(V([],q(e),!1)),r=t[0],o=t.slice(1);window.smartlook.apply(window,V([r],q(o),!1))}))},ae=(null===(c=document.currentScript)||void 0===c?void 0:c.src)||"",g.shouldStart()?g.start():function(){var e,t,r,o,n,i,a,s,c;return-1===[window.queueMicrotask,Array.from,null===(e=Array.prototype)||void 0===e?void 0:e.find,null===(t=Array.prototype)||void 0===t?void 0:t.flat,null===(r=Array.prototype)||void 0===r?void 0:r.flatMap,null===(o=Array.prototype)||void 0===o?void 0:o.includes,null===(n=Element.prototype)||void 0===n?void 0:n.append,null===(i=Event.prototype)||void 0===i?void 0:i.composedPath,"getRootNode"in(Node.prototype||{}),"isConnected"in(Node.prototype||{}),Object.assign,Object.entries,Object.fromEntries,Object.hasOwn,Object.setPrototypeOf,Object.values,String.prototype.includes,window.fetch,window.AbortController,window.MessageChannel,window.MessagePort,null===(a=window.navigator)||void 0===a?void 0:a.sendBeacon,window.requestIdleCallback,null===(s=window.Promise)||void 0===s?void 0:s.any,window.ResizeObserver,null===(c=window.Symbol)||void 0===c?void 0:c.asyncIterator,window.Reflect].map(Boolean).indexOf(!1)}()?ie():(l=ie,u=ae.replace("recorder.js","polyfills.3cf5e3f895bd7694ff51.js"),(d=document.createElement("script")).src=u,d.addEventListener("load",l,!0),document.head.appendChild(d))}();